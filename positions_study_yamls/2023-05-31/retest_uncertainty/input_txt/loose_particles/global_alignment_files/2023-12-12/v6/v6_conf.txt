def configureGlobalAlignment_v6(halfdofs="TxTyTz"):
    setup = AlignmentScenario('GlobalAlignment')
    setup.SubDetectors += ['VP', 'FT']

    elements = Alignables()
    elements.VP("RxRz")
    elements.VPRight(halfdofs)
    elements.VPLeft(halfdofs)

#    elements.FTCFrames("Tx") # added Tz, but need Tz survey unc. set to 0!
    elements.FTModules("TxRxRz")
#    elements.FTHalfModules("TxRxRz")

    setup.Elements += list(elements)

    surveyconstraints = SurveyConstraints()
    if UseDD4Hep:
        surveyconstraints.VP(ver='2023_dd4hep')
        surveyconstraints.FT(addHalfModuleJoints=True)
    else:
        surveyconstraints.VP(ver='latest')
    setup.SurveyConstraints = surveyconstraints

    constraints = []
    constraints.append("VPHalfAverage : .*?VP(Left|Right) : Tx Ty Tz")
#    constraints.append("FT_T2FramesFixed : FT/T2/(U|V)/HL.*/M. : Tx Rz")
    # remove this backframes constraint because it may be the problem shown in the plots in the last >    constraints.append("FTBackFramesFixed : FT/T3/X2/HL.*/M. : Tx Rz")
    setup.LagrangeConstraints = constraints
    print('setup:', setup)
    return setup
